@if(global.cartCount() == 0) {
  <div class="container d-flex flex-column align-items-center justify-content-center vh-100 text-center">
    <div class="cart-logo mb-4">
      <img src="/icons/cart-empty.png" alt="Empty Cart" class="img-fluid" style="max-width: 350px;" />
    </div>
    <!-- <h2 class="mb-3 text-secondary">Your Cart is Empty</h2> -->
    <p class="mb-4 text-muted">Looks like you haven't added anything to your cart yet.</p>
    <app-long-button
      label="Continue shopping"
      (buttonClick)="redirectToHome()"
    ></app-long-button>
  </div>
}
@else {
  <main class="cart-container">
    <div class="card-items">
      <section class="bag-section">
        @for(items of CartItems; track items) {
          <app-product-displaying-bar
            [productImage]="items.primaryImageUrl || 'images/box not packed.png'"
            [productName]="items.name"
            [productColor]="items.colorId"
            [productSize]="items.sizeId"
            [productPrice]="items.price"
            [productId]="items.id"
            [userId]="userId"
            (itemDeleted)="onItemDeleted($event)"
          ></app-product-displaying-bar>
        }
      </section>
    </div>
    <!-- Right Section (Summary) -->
    <aside class="summary-section">
      <h2>Summary</h2>
      <div class="summary-details">
        @for(numberOfItems of CartItems; track numberOfItems){
          @for(numOfCartItems of cartItemList; track numOfCartItems){
            @if(numberOfItems.id == numOfCartItems.productId){
              <p>
                <span>{{ numberOfItems.name }} x <strong>{{ numOfCartItems.quantity }}</strong></span>
                <span>{{ numberOfItems.price * numOfCartItems.quantity | currency:'INR' }}</span>
              </p>
            }
          }
        }
        @if(selectedAddress == 1 || selectedAddress == 2) {
          <p class="total">
            <span>Shipping : </span>
            <span>{{ '0' | currency:'INR' }}</span>
          </p>
        }
        @else if (selectedAddress == 3) {
          <p class="total">
            <span>Shipping : </span>
            <span>{{ '50' | currency:'INR' }}</span>
          </p>
        }
        <p class="total">
          <span>Total:</span>
          <span>{{ totalPrice | currency:'INR' }}</span>
        </p>
      </div>
      <div class="button">
        @if(selectedAddress) {
          <app-long-button
            label="Confirm Purchase"
            (buttonClick)="placeOrder()"
          ></app-long-button>
        }
        @else {
          <app-long-button
            label="Proceed to buy"
            routerLink="/addressconfirm"
          ></app-long-button>
        }
      </div>
    </aside>
  </main>
}
