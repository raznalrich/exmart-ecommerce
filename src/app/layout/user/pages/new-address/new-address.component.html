<form [formGroup]="addressForm" (ngSubmit)="onSubmit()" class="p-4">

  <div *ngIf="errorMessage" class="alert alert-danger mb-3">
    {{ errorMessage }}
  </div>
  <div *ngIf="successMessage" class="alert alert-success mb-3">
    {{ successMessage }}
  </div>

  <div class="mb-3">
    <label for="addressType" class="form-label">Address Type</label>
    <select
      id="addressType"
      class="form-select"
      formControlName="addressTypeName"
      [ngClass]="{'is-invalid': formControls['addressTypeName'].touched && formControls['addressTypeName'].errors}"
    >
      <option value="Home">Home</option>
      <option value="Work">Work</option>
      <option value="Other">Other</option>
    </select>
  </div>


  <div class="mb-3">
    <label for="addressLine" class="form-label">Building No</label>
    <input
      id="addressLine"
      type="text"
      class="form-control"
      formControlName="addressLine"
      [ngClass]="{'is-invalid': formControls['addressLine'].touched && formControls['addressLine'].errors}"
    >
    <div class="invalid-feedback" *ngIf="formControls['addressLine'].touched && formControls['addressLine'].errors?.['required']">
      Building number is required
    </div>
  </div>

  <div class="mb-3">
    <label for="city" class="form-label">City</label>
    <input
      id="city"
      type="text"
      class="form-control"
      formControlName="city"
      [ngClass]="{'is-invalid': formControls['city'].touched && formControls['city'].errors}"
    >
    <div class="invalid-feedback" *ngIf="formControls['city'].touched && formControls['city'].errors?.['required']">
      City is required
    </div>
  </div>


  <div class="mb-3">
    <label for="district" class="form-label">District</label>
    <input
      id="district"
      type="text"
      class="form-control"
      formControlName="district"
      [ngClass]="{'is-invalid': formControls['district'].touched && formControls['district'].errors}"
    >
    <div class="invalid-feedback" *ngIf="formControls['district'].touched && formControls['district'].errors?.['required']">
      District is required
    </div>
  </div>


  <div class="mb-3">
    <label for="state" class="form-label">State</label>
    <input
      id="state"
      type="text"
      class="form-control"
      formControlName="state"
      [ngClass]="{'is-invalid': formControls['state'].touched && formControls['state'].errors}"
    >
    <div class="invalid-feedback" *ngIf="formControls['state'].touched && formControls['state'].errors?.['required']">
      State is required
    </div>
  </div>


  <div class="mb-3">
    <label for="zipCode" class="form-label">Pincode</label>
    <input
      id="zipCode"
      type="text"
      class="form-control"
      formControlName="zipCode"
      [ngClass]="{'is-invalid': formControls['zipCode'].touched && formControls['zipCode'].errors}"
    >
    <div class="invalid-feedback" *ngIf="formControls['zipCode'].touched && formControls['zipCode'].errors?.['required']">
      Pincode is required
    </div>
    <div class="invalid-feedback" *ngIf="formControls['zipCode'].touched && formControls['zipCode'].errors?.['pattern']">
      Please enter a valid 6-digit pincode
    </div>
  </div>


  <div class="d-flex justify-content-end gap-2">
    <button
      type="button"
      class="btn btn-secondary"
      (click)="onCancel()"
    >
      Cancel
    </button>
    <button
      type="submit"
      class="btn btn-primary"
      [disabled]="!addressForm.valid || isSubmitting"
    >
      <span class="spinner-border spinner-border-sm me-2" *ngIf="isSubmitting"></span>
      {{ editMode ? 'Update' : 'Save' }} Address
    </button>
  </div>
</form>

